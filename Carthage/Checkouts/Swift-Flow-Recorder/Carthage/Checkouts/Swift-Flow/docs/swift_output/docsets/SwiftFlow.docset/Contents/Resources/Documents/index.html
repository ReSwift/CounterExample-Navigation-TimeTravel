<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SwiftFlow  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
  </head>
  <body>
    <a title="SwiftFlow  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SwiftFlow Docs</a> (59% documented)</p>
        <p class="header-right"><a href="https://github.com/Swift-Flow/Swift-Flow"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://https%3A%2F%2Fgithub%2Ecom%2FSwift%2DFlow%2Fdocsets%2FSwiftFlow%2Exml"><img src="img/dash.png"/>Install in Dash</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SwiftFlow Reference</a>
        <img id="carat" src="img/carat.png" />
        SwiftFlow  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P9SwiftFlow6Action">Action</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/AnyReducer.html">AnyReducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/AnyStoreSubscriber.html">AnyStoreSubscriber</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Coding.html">Coding</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Reducer.html">Reducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StandardActionConvertible.html">StandardActionConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StateType.html">StateType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Store.html">Store</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StoreSubscriber.html">StoreSubscriber</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CombinedReducer.html">CombinedReducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StandardAction.html">StandardAction</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:9SwiftFlow13ActionCreator">ActionCreator</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:9SwiftFlow18AsyncActionCreator">AsyncActionCreator</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:9SwiftFlow16DispatchCallback">DispatchCallback</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://travis-ci.org/Swift-Flow/Swift-Flow"><img src="https://img.shields.io/travis/Swift-Flow/Swift-Flow.svg?style=flat-square" alt="Build Status"></a> <a href="http://codecov.io/github/Swift-Flow/Swift-Flow"><img src="https://img.shields.io/codecov/c/github/Swift-Flow/Swift-Flow.svg?style=flat-square" alt="Code coverage status"></a> <a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/github/tag/Swift-Flow/Swift-Flow.svg?label=carthage&amp;style=flat-square" alt="Carthage semver"></a> <a href="https://github.com/Swift-Flow/Swift-Flow/blob/master/LICENSE.md"><img src="https://img.shields.io/badge/platform-ios%20%7C%20osx%20%7C%20tvos%20%7C%20watchos-lightgrey.svg?style=flat-square" alt="Platform support"></a> <a href="https://github.com/Swift-Flow/Swift-Flow/blob/master/LICENSE.md"><img src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square" alt="License MIT"></a></p>
<a href='#related_projects' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='related_projects'>Related Projects</h1>

<p>If you landed here, you should also check out the great work over at <a href="https://github.com/ReduxKit/ReduxKit">ReduxKit</a>, which brings the original Redux API to Swift. We all agree that collaboration and sharing of idea&rsquo;s will be beneficial to both projects. Go check it out. Feedback on both projects would be appreciated.</p>
<a href='#table_of_contents' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='table_of_contents'>Table of Contents</h1>

<ul>
<li><a href="#about-swift-flow">About Swift Flow</a></li>
<li><a href="#why-swift-flow">Why Swift Flow?</a></li>
<li><a href="#getting-started-guide">Getting Started Guide</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#demo">Demo</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#example-projects">Example Projects</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#get-in-touch">Get in touch</a></li>
</ul>
<a href='#about_swift_flow' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='about_swift_flow'>About Swift Flow</h1>

<p><strong>This library is a pre-release. Expect missing docs and breaking API changes.</strong></p>

<p>Swift Flow is a <a href="https://github.com/rackt/redux">Redux</a>-like implementation of the unidirectional data flow architecture in Swift. It embraces a unidirectional data flow that only allows state mutations through declarative actions.</p>

<p>It relies on a few principles:
- <strong>The Store</strong> stores your entire app state in the form of a single data structure. This state can only be modified by dispatching Actions to the store. Whenever the state in the store changes, the store will notify all observers.
- <strong>Actions</strong> are a declarative way of describing a state change. Actions don&rsquo;t contain any code, they are consumed by the store and forwarded to reducers. Reducers will handle the actions by implementing a different state change for each action.
- <strong>Reducers</strong> provide pure functions, that based on the current action and the current app state, create a new app state</p>

<p><img src="Readme/Assets/swift_flow_concept.png" alt=""></p>

<p>For a very simple app, that maintains a counter that can be increased and decreased, you can define the app state as following:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">AppState</span><span class="p">:</span> <span class="kt">StateType</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">counter</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">}</span>
</code></pre>

<p>You would also define two actions, one for increasing and one for decreasing the counter. In the <a href="Readme/GettingStarted.md">Getting Started Guide</a> you can find out how to construct complex actions. For the simple actions in this example we can define empty structs that conform to action:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">CounterActionIncrease</span><span class="p">:</span> <span class="kt">Action</span> <span class="p">{}</span>
<span class="kd">struct</span> <span class="kt">CounterActionDecrease</span><span class="p">:</span> <span class="kt">Action</span> <span class="p">{}</span>
</code></pre>

<p>Your reducer needs to respond to these different action types, that can be done by switching over the type of action:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">CounterReducer</span><span class="p">:</span> <span class="kt">Reducer</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">handleAction</span><span class="p">(</span><span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">AppState</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="kt">Action</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AppState</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">_</span> <span class="k">as</span> <span class="kt">CounterActionIncrease</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">case</span> <span class="n">_</span> <span class="k">as</span> <span class="kt">CounterActionDecrease</span><span class="p">:</span>
            <span class="n">state</span><span class="o">.</span><span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">state</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>

<p>In order to have a predictable app state, it is important that the reducer is always free of side effects, it receives the current app state and an action and returns the new app state.</p>

<p>Lastly, your view layer, in this case a view controller, needs to tie into this system by subscribing to store updates and emitting actions whenever the app state needs to be changed:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">CounterViewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">StoreSubscriber</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">counterLabel</span><span class="p">:</span> <span class="kt">UILabel</span><span class="o">!</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewWillAppear</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mainStore</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewWillDisappear</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mainStore</span><span class="o">.</span><span class="nf">unsubscribe</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">newState</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">AppState</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">counterLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"</span><span class="se">\(</span><span class="n">state</span><span class="o">.</span><span class="n">counter</span><span class="se">)</span><span class="s">"</span>
    <span class="p">}</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">increaseButtonTapped</span><span class="p">(</span><span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mainStore</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span>
            <span class="kt">CounterActionIncrease</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">decreaseButtonTapped</span><span class="p">(</span><span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mainStore</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span>
            <span class="kt">CounterActionDecrease</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>

<p>The <code>newState</code> method will be called by the <code>Store</code> whenever a new app state is available, this is where we need to adjust our view to reflect the latest app state.</p>

<p>Button taps result in dispatched actions that will be handled by the store and its reducers, resulting in a new app state.</p>

<p>This is a very basic example that only shows a subset of Swift Flow&rsquo;s features, read the Getting Started Guide to see how you can build entire apps with this architecture.</p>
<a href='#why_swift_flow' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='why_swift_flow'>Why Swift Flow?</h1>

<p>Model-View-Controller (MVC) is not a holistic application architecture. Typical Cocoa apps defer a lot of complexity to controllers since MVC doesn&rsquo;t offer other solutions for state management, one of the most complex issues in app development. </p>

<p>Apps built upon MVC often end up with a lot of complexity around state management and propagation. We need to use callbacks, delegations, Key-Value-Observation and notifications to pass information around in our apps and to ensure that all the relevant views have the latest state.</p>

<p>This approach involves a lot of manual steps and is thus error prone and doesn&rsquo;t scale well in complex code bases.</p>

<p>It also leads to code that is difficult to understand at a glance, since dependencies can be hidden deep inside of view controllers. Lastly, you mostly end up with inconsistent code, where each developer uses the state propagation procedure they personally prefer. You can circumvent this issue by style guides and code reviews but you cannot automatically verify the adherence to these guidelines.</p>

<p>Swift Flow attempts to solve these problem by placing strong constraints on the way applications can be written. This reduces the room for programmer error and leads to applications that can be easily understood - by inspecting the application state data structure, the actions and the reducers.</p>

<p>This architecture provides further benefits beyond improving your code base:</p>

<ul>
<li>Stores, Reducers, Actions and extensions such as Swift Flow Router are entirely platform independent - you can easily use the same business logic and share it between apps for multiple platforms (iOS, tvOS, etc.)</li>
<li>Want to collaborate with a co-worker on fixing an app crash? Use <a href="https://github.com/Swift-Flow/Swift-Flow-Recorder">Swift Flow Recorder</a> to record the actions that lead up to the crash and send them the JSON file so that they can replay the actions and reproduce the issue right away.</li>
<li>Maybe recorded actions can be used to build UI and integration tests?</li>
</ul>

<p>The Swift Flow tooling is still in a very early stage, but aforementioned prospects excite me and hopefully others in the community as well!</p>
<a href='#getting_started_guide' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='getting_started_guide'>Getting Started Guide</h1>

<p><a href="Readme/GettingStarted.md">A Getting Started Guide that describes the core components of apps built with Swift Flow lives here</a>. It will be expanded in the next few weeks. To get an understanding of the core principles I recommend reading the brilliant <a href="http://rackt.org/redux/">redux documentation</a>.</p>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='installation'>Installation</h1>
<a href='#cocoapods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='cocoapods'>Cocoapods</h2>

<p>You can install Swift Flow via CocoaPods by adding it to your <code>Podfile</code>:</p>
<pre class="highlight plaintext"><code>use_frameworks!

source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '8.0'

pod 'SwiftFlow'
</code></pre>

<p>And run <code>pod install</code>.</p>
<a href='#carthage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='carthage'>Carthage</h2>

<p>You can install Swift Flow via <a href="">Carthage</a> by adding the following line to your Cartfile:</p>
<pre class="highlight plaintext"><code>github "Swift-Flow/Swift-Flow"
</code></pre>
<a href='#checking_out_source_code_and_running_tests' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='checking_out_source_code_and_running_tests'>Checking out Source Code and Running Tests</h1>

<p>Due to an <a href="https://github.com/Quick/Nimble/issues/213">issue in Nimble</a> at the moment, tvOS tests will fail if building Nimble / Quick from source. You can however install Nimble &amp; Quick from binaries then rebuild OSX &amp; iOS only. After checkout, run the following from the terminal:</p>
<pre class="highlight shell"><code>carthage bootstrap <span class="o">&amp;&amp;</span> carthage bootstrap --no-use-binaries --platform ios,osx
</code></pre>
<a href='#demo' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='demo'>Demo</h1>

<p>Using this library you can implement apps that have an explicit, reproducible state, allowing you, among many other things, to replay and rewind the app state, as shown below:</p>

<p><img src="Readme/Assets/timetravel.gif" alt=""></p>
<a href='#extensions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='extensions'>Extensions</h1>

<p>This repository contains the core component for Swift Flow, the following extensions are available:</p>

<ul>
<li><a href="https://github.com/Swift-Flow/Swift-Flow-Router">Swift-Flow-Router</a>: Provides a SwiftFlow compatible Router that allows declarative routing in iOS applications</li>
<li><a href="https://github.com/Swift-Flow/Swift-Flow-Recorder">Swift-Flow-Recorder</a>: Provides a <code>Store</code> implementation that records all <code>Action</code>s and allows for hot-reloading and time travel</li>
</ul>
<a href='#example_projects' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='example_projects'>Example Projects</h1>

<ul>
<li><a href="https://github.com/Swift-Flow/CounterExample">CounterExample</a>: A very simple counter app implemented with Swift Flow. This app also demonstrates the basics of routing with SwiftFlowRouter.</li>
<li><a href="https://github.com/Ben-G/Meet">Meet</a>: A real world application being built with Swift Flow - currently still very early on.</li>
</ul>
<a href='#contributing' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='contributing'>Contributing</h1>

<p>There&rsquo;s still a lot of work to do here! I would love to see you involved! Some design decisions for the core of Swift Flow are still up in the air (see issues), there&rsquo;s lots of useful documentation that can be written and a ton of extensions and tools are waiting to be built on top of Swift Flow.</p>

<p>I personally think the best way to get started contributing to this library is by using it in one of your projects!</p>
<a href='#credits' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='credits'>Credits</h1>

<ul>
<li>Thanks a lot to <a href="https://github.com/gaearon">Dan Abramov</a> for building <a href="https://github.com/rackt/redux">Redux</a> - all ideas in here and many implementation details were provided by his library.</li>
</ul>
<a href='#get_in_touch' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='get_in_touch'>Get in touch</h1>

<p>If you have any questions, you can find me on twitter <a href="https://twitter.com/benjaminencz">@benjaminencz</a>.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://github.com/Swift-Flow/Swift-Flow" target="_blank" rel="external">Benjamin</a>. All rights reserved. (Last updated: 2016-01-04)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.4.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
